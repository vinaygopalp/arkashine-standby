{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'dashbaord/css/styles.css' %}">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
     
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/areaspline.js"></script>
    <link rel="stylesheet" href="{% static 'dashboard/css/animation.css' %}">
    <title>Dashboard</title>
</head>
{% comment %} <body style="background-size: 100% 100%; background-image: url({% static 'dashboard/bg1.jpeg' %});"> {% endcomment %}
  <body style="background-size: 100% 100%;">
    <!-- Navbar -->
    <nav class="navbar fixed-top navbar-expand navbar-dark" style="background-color: #55779f;">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'dashboard' %}">
                <h3 class="my-heading" style="font-size: 15px;">ArkaShine Innovations</h3>
            </a>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'logout' %}">Logout</a>
                </li>
            </ul>
        </div>
    </nav>

    <br><br><br><br>
    <div class="row">
      <div class="col-sm-4 mb-3 mb-sm-0">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Product-1</h5>
            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </div>
      <div class="col-sm-4 mb-3 mb-sm-0">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Product-2</h5>
            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </div>
      <div class="col-sm-4">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Product-3</h5>
            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </div>
    </div>
    <br><br><br><br>
    <div class="container-fluid" style="margin:0px 0px 0px 0px ; padding:0px 0px 0px 0px ">
        <div class="row">
            <!-- Side Navbar -->
            <div class="col-2 bg-light">
                <div class="d-flex flex-column">
                    <button class="btn btn-primary mb-2">Button 1</button>
                    <button class="btn btn-secondary mb-2">Button 2</button>
                    <a href="#" class="btn btn-link">Link 1</a>
                    <a href="#" class="btn btn-link">Link 2</a>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-7">
                
                <table class="graph" style="width:100%">
                  <caption>Montly Users</caption>
                  <thead>
                    <tr>
                      <th scope="col">Item</th>
                      <th scope="col">Percent</th>
                    </tr>
                  </thead><tbody>
                    <tr style="height:85%">
                      <th scope="row">Your Blog</th>
                      <td><span>85%</span></td>
                    </tr>
                    <tr style="height:23%">
                      <th scope="row">Medium</th>
                      <td><span>23%</span></td>
                    </tr>
                    <tr style="height:7%">
                      <th scope="row">Tumblr</th>
                      <td><span>7%</span></td>
                    </tr>
                    <tr style="height:38%">
                      <th scope="row">Facebook</th>
                      <td><span>38%</span></td>
                    </tr>
                    <tr style="height:35%">
                      <th scope="row">Youtube</th>
                      <td><span>35%</span></td>
                    </tr>
                    <tr style="height:30%">
                      <th scope="row">LinkedIn</th>
                      <td><span>30%</span></td>
                    </tr>
                    <tr style="height:5%">
                      <th scope="row">Twitter</th>
                      <td><span>5%</span></td>
                    </tr>
                    <tr style="height:20%">
                      <th scope="row">Other</th>
                      <td><span>20%</span></td>
                    </tr>
                  </tbody>
                </table>
            
                <br><br><br><Br><Br><br><br><br>
                <div id="containerchart" style="width:100%; height:700px;"></div>  <!-- Increase height for better visibility -->
                  <br><br>
                   
                <table class="graph" style="width:100%">
                  <caption>Cityvise Users</caption>
                  <thead>
                    <tr>
                      <th scope="col">Item</th>
                      <th scope="col">Percent</th>
                    </tr>
                  </thead><tbody>
                    <tr style="height:85%">
                      <th scope="row">Your Blog</th>
                      <td><span>85%</span></td>
                    </tr>
                    <tr style="height:23%">
                      <th scope="row">Medium</th>
                      <td><span>23%</span></td>
                    </tr>
                    <tr style="height:7%">
                      <th scope="row">Tumblr</th>
                      <td><span>7%</span></td>
                    </tr>
                    <tr style="height:38%">
                      <th scope="row">Facebook</th>
                      <td><span>38%</span></td>
                    </tr>
                    <tr style="height:35%">
                      <th scope="row">Youtube</th>
                      <td><span>35%</span></td>
                    </tr>
                    <tr style="height:30%">
                      <th scope="row">LinkedIn</th>
                      <td><span>30%</span></td>
                    </tr>
                    <tr style="height:5%">
                      <th scope="row">Twitter</th>
                      <td><span>5%</span></td>
                    </tr>
                    <tr style="height:20%">
                      <th scope="row">Other</th>
                      <td><span>20%</span></td>
                    </tr>
                  </tbody>
                </table>
                <br><BR><br><br><br><br>
                  <select id="user-dropdown">
                    <option value="" disabled selected>Select a user</option>
                    {% for user in users %}
                      <option value="{{ user.id }}">{{ user.username }}</option>
                    {% endfor %}
                  </select>
                  
                  <div id="containerchart2" style="width:100%; height:700px;"></div> 
            </div>

            <!-- User Counter Section with Meter -->
            <div class="col-3">
                <section class="container">
                    <h1 class="counter-title">Total Users</h1>
                    <div class="counter-box">
                        <div class="meter-container" data-total-users="{{ total_users }}" data-meter-percentage="{{ meter_percentage }}">
                            <svg viewBox="0 0 100 100">
                                <circle class="circle-bg" cx="50" cy="50" r="45"></circle>
                                <circle class="circle" cx="50" cy="50" r="45"></circle>
                            </svg>
                            <!-- Display the number of users inside the meter -->
                            <div class="counter-number">80</div>
                        </div>
                    </div>
                </section>
<br><Br><br><br>  
                <section class="container">
                    <h1 class="counter-title">Total Growth</h1>
                    <div class="counter-box">
                        <div class="meter-container" data-total-users="{{ total_users }}" data-meter-percentage="{{ meter_percentage }}">
                            <svg viewBox="0 0 100 100">
                                <circle class="circle-bg" cx="50" cy="50" r="45"></circle>
                                <circle class="circle" cx="50" cy="50" r="45"></circle>
                            </svg>
                            <!-- Display the number of users inside the meter -->
                            <div class="counter-number" >80</div>
                        </div>
                    </div>
                </section>
                <br><Br><br><br>  
                <section class="container">
                    <h1 class="counter-title">Total API calls</h1>
                    <div class="counter-box">
                        <div class="meter-container" data-total-users="{{ total_users }}" data-meter-percentage="{{ meter_percentage }}">
                            <svg viewBox="0 0 100 100">
                                <circle class="circle-bg" cx="50" cy="50" r="45"></circle>
                                <circle class="circle" cx="50" cy="50" r="45"></circle>
                            </svg>
                            <!-- Display the number of users inside the meter -->
                            <div class="counter-number">80</div>
                        </div>
                    </div>
                </section>
                <br><Br><br><br>  
                <section class="container">
                  <h1 class="counter-title">Total Active devices</h1>
                  <div class="counter-box">
                      <div class="meter-container" data-total-users="{{ total_users }}" data-meter-percentage="{{ meter_percentage }}">
                          <svg viewBox="0 0 100 100">
                              <circle class="circle-bg" cx="50" cy="50" r="45"></circle>
                              <circle class="circle" cx="50" cy="50" r="45"></circle>
                          </svg>
                          <!-- Display the number of users inside the meter -->
                          <div class="counter-number">80</div>
                      </div>
                  </div>
              </section>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            // Function to animate the circular meter
            function animateMeter(circle, percentage) {
                var radius = circle.r.baseVal.value;
                var circumference = radius * 2 * Math.PI;
                var offset = circumference - (percentage / 100) * circumference;
                circle.style.strokeDashoffset = offset;
            }

            // Counter function to animate numbers
            function animateCounter(element, targetValue, duration) {
                var currentValue = 0;
                var increment = targetValue / (duration / 50);

                var counter = setInterval(function() {
                    currentValue += increment;
                    if (currentValue >= targetValue) {
                        currentValue = targetValue;
                        clearInterval(counter);
                    }
                    $(element).text(Math.floor(currentValue));
                }, 50);
            }

            // Loop through each meter-container and apply the animations
            $('.meter-container').each(function(index) {
                var $meterContainer = $(this);

                // Get the circle element and target percentage (can come from backend if dynamic)
                var circle = $meterContainer.find('.circle')[0];
                var totalUsers = $meterContainer.data('total-users');  // Get totalUsers from a data attribute
                var meterPercentage = $meterContainer.data('meter-percentage'); // Get meterPercentage from data attribute

                // Trigger the meter animation and counter for each meter container
                animateMeter(circle, meterPercentage);
                animateCounter($meterContainer.find('.counter-number')[0], totalUsers, 2000);
            });
        });
    </script>

<script>
  $(function () { 
    var myChart = Highcharts.chart('containerchart', {
      chart: {
        type: 'areaspline',
        zoomType: 'x',
         resetZoomButton: {
            position: {
                x: 10,
                y: -70
            },
            relativeTo: 'chart',
            theme: {
                fill: 'white',
                style: {
                    color: '#719e19',
                    text: {
                        y: '15'
                    },

                },
                stroke: 'silver',
                r: 1,
                states: {
                    hover: {
                        fill: '#F5F7DC'
                    }
                }
            }
        },
      },
      title: {
        text: 'Red orange green'
      },
      xAxis: {
         categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
         
      },
      yAxis: {
        title: {
            text: 'Currency'
          }
      },
      legend: {
          enabled: false
      },
      plotOptions: {
        area: {
          marker: {
              radius: 5
          },
          lineWidth: 0.1,
          states: {
              hover: {
                  lineWidth: 3
              }
          },
          threshold: null
        }
      },
      series: [{
        type: 'area',
        name: 'usd to uah',
        data: [29.9, 30.0, 29.75, 29.5, 28.5, 28.0, 27.85, 27.75, 27.5, 27.75, 27.85, 27.5]
      },{
        type: 'area',
        name: 'eur to uah',
        data: [33.9, 30.5, 30.4, 29.2, 29.0, 28.70, 28.75, 28.70, 28.5, 28.65, 28.7, 28.88]    
      }],
      navigation: {
        buttonOptions: {
          enabled: false
        }
      }
    });
  });





  {% comment %} chart2 {% endcomment %}
  $(function () { 
    var myChart = Highcharts.chart('containerchart2', {
      chart: {
        type: 'areaspline',
        zoomType: 'x',
         resetZoomButton: {
            position: {
                x: 10,
                y: -70
            },
            relativeTo: 'chart',
            theme: {
                fill: 'white',
                style: {
                    color: '#719e19',
                    text: {
                        y: '15'
                    },

                },
                stroke: 'silver',
                r: 1,
                states: {
                    hover: {
                        fill: '#F5F7DC'
                    }
                }
            }
        },
      },
      title: {
        text: 'Soil composition'
      },
      xAxis: {
         categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
         
      },
      yAxis: {
        title: {
            text: 'Currency'
          }
      },
      legend: {
          enabled: false
      },
      plotOptions: {
        area: {
          marker: {
              radius: 5
          },
          lineWidth: 0.1,
          states: {
              hover: {
                  lineWidth: 3
              }
          },
          threshold: null
        }
      },
      series: [{
        type: 'area',
        name: 'usd to uah',
        data: [29.9, 30.0, 29.75, 29.5, 28.5, 28.0, 27.85, 27.75, 27.5, 27.75, 2,27.85, 27.5]
      }
      ,{
        type: 'area',
        name: 'eur to uah',
        data: [53.9, 30.5, 30.4, 29.2, 29.0, 28.70, 28.75, 28.70, 28.5, 28.65, 28.7, 28.88]    
      }
      ,{
        type: 'area',
        name: 'eur to uah',
        data: [33.9, 30.5, 30.4, 29.2, 29.0, 28.70, 90,28.75, 28.70, 28.5, 28.65, 28.7, 28.88]    
      },{
        type: 'area',
        name: 'eur to uah',
        data: [93.9, 30.5, 30.4, 2,29.2, 29.0, 28.70,28.75, 28.70, 28.5, 28.65, 28.7, 28.88]    
      }],
      navigation: {
        buttonOptions: {
          enabled: false
        }
      }
    });
  });
</script>
</body>
</html>
